!function(){var a=function(){var a=window.location.href,b=/https?:\/\/[\w-_\.]+.scm.[\w-_\.]+\/([^\/]+)/i,c=b.exec(a),d=null;return!c&&c.length>1&&(d=c[1]),d},b=function(a,b,c,d){var e=new XMLHttpRequest;e.open(a,b,!0),e.onreadystatechange=function(){4===e.readyState&&(200===e.status?c(JSON.parse(e.responseText)):e.status>=400&&d(e.status,e.responseText))},e.send()},c=function(a,c,d){b("PUT",a,c,d)},d=function(a,c,d){b("GET",a,c,d)},e=function(a,c,d){b("DELETE",a,c,d)},f=function(a){a=a||0,setTimeout(function(){alert("This site extension has been updated. We'll now reload your page for you to give you the latest updates"),location.reload()},a)},g=function(){var a=function(){f(2e3)},b="/api/processes/0";e(b,a,a)},h=function(a,b,d){b=b||!1,d=d!==!1,c(a,function(){b?g():f()},function(){d&&setTimeout(function(){h(a,b,!1)},1e3)})},i=function(){var b=a();if(null===b)return void console.warn("This isn't a site extension running under the scm site.  I can't update you");var c="/api/siteExtensions/"+b;d(c,function(a){a.local_is_latest_version||h(c)},function(a,b){if(404===a){var d=!0;h(c,d)}})};i()}();